<?xml version="1.0" encoding="utf-8" ?>
<Sqls>


  <Sql>
    <key>Save</key>
    <query>
      insert into f_lectura_sp7(
      fechahora,
      gpscodi,
      vsf,
      maximo,
      minimo,
      voltaje,
      num,
      desv,
      h0,
      h1,
      h2,
      h3,
      h4,
      h5,
      h6,
      h7,
      h8,
      h9,
      h10,
      h11,
      h12,
      h13,
      h14,
      h15,
      h16,
      h17,
      h18,
      h19,
      h20,
      h21,
      h22,
      h23,
      h24,
      h25,
      h26,
      h27,
      h28,
      h29,
      h30,
      h31,
      h32,
      h33,
      h34,
      h35,
      h36,
      h37,
      h38,
      h39,
      h40,
      h41,
      h42,
      h43,
      h44,
      h45,
      h46,
      h47,
      h48,
      h49,
      h50,
      h51,
      h52,
      h53,
      h54,
      h55,
      h56,
      h57,
      h58,
      h59,
      devsec,
      frecspusucreacion,
      frecspfeccreacion,
      frecspusumodificacion,
      frecspfecmodificacion
      )
      values(
      :fechahora,
      :gpscodi,
      :vsf,
      :maximo,
      :minimo,
      :voltaje,
      :num,
      :desv,
      :h0,
      :h1,
      :h2,
      :h3,
      :h4,
      :h5,
      :h6,
      :h7,
      :h8,
      :h9,
      :h10,
      :h11,
      :h12,
      :h13,
      :h14,
      :h15,
      :h16,
      :h17,
      :h18,
      :h19,
      :h20,
      :h21,
      :h22,
      :h23,
      :h24,
      :h25,
      :h26,
      :h27,
      :h28,
      :h29,
      :h30,
      :h31,
      :h32,
      :h33,
      :h34,
      :h35,
      :h36,
      :h37,
      :h38,
      :h39,
      :h40,
      :h41,
      :h42,
      :h43,
      :h44,
      :h45,
      :h46,
      :h47,
      :h48,
      :h49,
      :h50,
      :h51,
      :h52,
      :h53,
      :h54,
      :h55,
      :h56,
      :h57,
      :h58,
      :h59,
      :devsec,
      :frecspusucreacion,
      :frecspfeccreacion,
      :frecspusumodificacion,
      :frecspfecmodificacion
      )
    </query>
  </Sql>

  <Sql>
    <key>Update</key>
    <query>
      update f_lectura_sp7
      set
      vsf = :vsf,
      maximo = :maximo,
      minimo = :minimo,
      voltaje = :voltaje,
      num = :num,
      desv = :desv,
      h0 = :h0,
      h1 = :h1,
      h2 = :h2,
      h3 = :h3,
      h4 = :h4,
      h5 = :h5,
      h6 = :h6,
      h7 = :h7,
      h8 = :h8,
      h9 = :h9,
      h10 = :h10,
      h11 = :h11,
      h12 = :h12,
      h13 = :h13,
      h14 = :h14,
      h15 = :h15,
      h16 = :h16,
      h17 = :h17,
      h18 = :h18,
      h19 = :h19,
      h20 = :h20,
      h21 = :h21,
      h22 = :h22,
      h23 = :h23,
      h24 = :h24,
      h25 = :h25,
      h26 = :h26,
      h27 = :h27,
      h28 = :h28,
      h29 = :h29,
      h30 = :h30,
      h31 = :h31,
      h32 = :h32,
      h33 = :h33,
      h34 = :h34,
      h35 = :h35,
      h36 = :h36,
      h37 = :h37,
      h38 = :h38,
      h39 = :h39,
      h40 = :h40,
      h41 = :h41,
      h42 = :h42,
      h43 = :h43,
      h44 = :h44,
      h45 = :h45,
      h46 = :h46,
      h47 = :h47,
      h48 = :h48,
      h49 = :h49,
      h50 = :h50,
      h51 = :h51,
      h52 = :h52,
      h53 = :h53,
      h54 = :h54,
      h55 = :h55,
      h56 = :h56,
      h57 = :h57,
      h58 = :h58,
      h59 = :h59,
      devsec = :devsec,
      frecspusucreacion = :frecspusucreacion,
      frecspfeccreacion = :frecspfeccreacion,
      frecspusumodificacion = :frecspusumodificacion,
      frecspfecmodificacion = :frecspfecmodificacion
      where
      fechahora = :fechahora and
      gpscodi = :gpscodi
    </query>
  </Sql>

  <Sql>
    <key>Delete</key>
    <query>
      delete from f_lectura_sp7
      where
      fechahora = :fechahora and
      gpscodi = :gpscodi
    </query>
  </Sql>

  <Sql>
    <key>GetById</key>
    <query>
      select
      fechahora,
      gpscodi,
      vsf,
      maximo,
      minimo,
      voltaje,
      num,
      desv,
      h0,
      h1,
      h2,
      h3,
      h4,
      h5,
      h6,
      h7,
      h8,
      h9,
      h10,
      h11,
      h12,
      h13,
      h14,
      h15,
      h16,
      h17,
      h18,
      h19,
      h20,
      h21,
      h22,
      h23,
      h24,
      h25,
      h26,
      h27,
      h28,
      h29,
      h30,
      h31,
      h32,
      h33,
      h34,
      h35,
      h36,
      h37,
      h38,
      h39,
      h40,
      h41,
      h42,
      h43,
      h44,
      h45,
      h46,
      h47,
      h48,
      h49,
      h50,
      h51,
      h52,
      h53,
      h54,
      h55,
      h56,
      h57,
      h58,
      h59,
      devsec,
      frecspusucreacion,
      frecspfeccreacion,
      frecspusumodificacion,
      frecspfecmodificacion
      from
      f_lectura_sp7
      where
      fechahora = :fechahora and
      gpscodi = :gpscodi
    </query>
  </Sql>

  <Sql>
    <key>List</key>
    <query>
      select
      fechahora,
      gpscodi,
      vsf,
      maximo,
      minimo,
      voltaje,
      num,
      desv,
      h0,
      h1,
      h2,
      h3,
      h4,
      h5,
      h6,
      h7,
      h8,
      h9,
      h10,
      h11,
      h12,
      h13,
      h14,
      h15,
      h16,
      h17,
      h18,
      h19,
      h20,
      h21,
      h22,
      h23,
      h24,
      h25,
      h26,
      h27,
      h28,
      h29,
      h30,
      h31,
      h32,
      h33,
      h34,
      h35,
      h36,
      h37,
      h38,
      h39,
      h40,
      h41,
      h42,
      h43,
      h44,
      h45,
      h46,
      h47,
      h48,
      h49,
      h50,
      h51,
      h52,
      h53,
      h54,
      h55,
      h56,
      h57,
      h58,
      h59,
      devsec,
      frecspusucreacion,
      frecspfeccreacion,
      frecspusumodificacion,
      frecspfecmodificacion
      from
      f_lectura_sp7
    </query>
  </Sql>

  <Sql>
    <key>GetByCriteria</key>
    <query>
      select
      fechahora,
      gpscodi,
      vsf,
      maximo,
      minimo,
      voltaje,
      num,
      desv,
      h0,
      h1,
      h2,
      h3,
      h4,
      h5,
      h6,
      h7,
      h8,
      h9,
      h10,
      h11,
      h12,
      h13,
      h14,
      h15,
      h16,
      h17,
      h18,
      h19,
      h20,
      h21,
      h22,
      h23,
      h24,
      h25,
      h26,
      h27,
      h28,
      h29,
      h30,
      h31,
      h32,
      h33,
      h34,
      h35,
      h36,
      h37,
      h38,
      h39,
      h40,
      h41,
      h42,
      h43,
      h44,
      h45,
      h46,
      h47,
      h48,
      h49,
      h50,
      h51,
      h52,
      h53,
      h54,
      h55,
      h56,
      h57,
      h58,
      h59,
      devsec,
      frecspusucreacion,
      frecspfeccreacion,
      frecspusumodificacion,
      frecspfecmodificacion
      from
      f_lectura_sp7
    </query>
  </Sql>

  <Sql>
    <key>ObtenerListado</key>
    <query>
      select
      *
      from (
      select a.fechahora,b.gpscodi,a.vsf,a.maximo,a.minimo,a.voltaje,a.num,a.desv,a.h0,a.h1,a.h2,a.h3,a.h4,a.h5,a.h6,a.h7,a.h8,a.h9,a.h10,a.h11,a.h12,a.h13,a.h14,a.h15,a.h16,a.h17,a.h18,a.h19,a.h20,a.h21,a.h22,a.h23,a.h24,a.h25,a.h26,a.h27,a.h28,a.h29,a.h30,a.h31,a.h32,a.h33,a.h34,a.h35,a.h36,a.h37,a.h38,a.h39,a.h40,a.h41,a.h42,a.h43,a.h44,a.h45,a.h46,a.h47,a.h48,a.h49,a.h50,a.h51,a.h52,a.h53,a.h54,a.h55,a.h56,a.h57,a.h58,a.h59,a.devsec,a.frecspusucreacion,a.frecspfeccreacion,a.frecspusumodificacion,a.frecspfecmodificacion, (row_number() over (order by a.fechahora desc)) as r from f_lectura_sp7 a, me_gps b where (b.gpscodi= a.gpscodi) and (a.gpscodi={0} or {0} = 0)
      and
      (
      (a.fechahora >= to_date('{1}','YYYY-MM-DD HH24:MI:SS') and
      a.fechahora &lt; to_date('{2}','YYYY-MM-DD HH24:MI:SS')+1/1440)
      )
      order by a.fechahora
      )
      where (r >= ((({3}-1) * {4}) + 1) and r &lt; (({3} * {4}) + 1 )) or ({3} = -1 and {4} = -1)
    </query>

  </Sql>



  <Sql>
    <key>ObtenerListadoGrafico</key>
    <query>
      select a.fechahora,
      a.h0,a.h1,a.h2,a.h3,a.h4,a.h5,a.h6,a.h7,a.h8,a.h9,a.h10,a.h11,a.h12,a.h13,a.h14,a.h15,
      a.h16,a.h17,a.h18,a.h19,a.h20,a.h21,a.h22,a.h23,a.h24,a.h25,a.h26,a.h27,a.h28,a.h29,a.h30,
      a.h31,a.h32,a.h33,a.h34,a.h35,a.h36,a.h37,a.h38,a.h39,a.h40,a.h41,a.h42,a.h43,a.h44,a.h45,
      a.h46,a.h47,a.h48,a.h49,a.h50,a.h51,a.h52,a.h53,a.h54,a.h55,a.h56,a.h57,a.h58,a.h59
      from f_lectura_sp7 a where a.gpscodi={0}
      and
      (
      (a.fechahora >= to_date('{1}','YYYY-MM-DD HH24:MI:SS') and
      a.fechahora &lt; to_date('{2}','YYYY-MM-DD HH24:MI:SS')+1/1440)
      )
      order by a.fechahora
    </query>

  </Sql>

  <Sql>
    <key>TotalRegistros</key>
    <query>
      select count(*) from f_lectura_sp7 a,me_gps b where (b.gpscodi= a.gpscodi) and (a.gpscodi={0} or {0} = 0)
      and
      (
      (a.fechahora >= to_date('{1}','YYYY-MM-DD HH24:MI:SS') and
      a.fechahora &lt; to_date('{2}','YYYY-MM-DD HH24:MI:SS')+1/1440)
      )
    </query>
  </Sql>


  <Sql>
    <key>MaximaFrecuencia</key>
    <query>
      select * from f_lectura_sp7
      where
      gpscodi={0} and
      fechahora>=to_date('{1}','YYYY-MM-DD HH24:MI:SS')
      and fechahora &lt; to_date('{2}','YYYY-MM-DD HH24:MI:SS')+1/1440
      and maximo=(
      select max(maximo) from f_lectura_sp7
      where
      gpscodi={0} and
      fechahora>=to_date('{1}','YYYY-MM-DD HH24:MI:SS')
      and fechahora &lt; to_date('{2}','YYYY-MM-DD HH24:MI:SS')+1/1440)
    </query>
  </Sql>
  
  
    <Sql>
    <key>MinimaFrecuencia</key>
    <query>
      select * from f_lectura_sp7
      where
      gpscodi={0} and
      fechahora>=to_date('{1}','YYYY-MM-DD HH24:MI:SS')
      and fechahora &lt; to_date('{2}','YYYY-MM-DD HH24:MI:SS')+1/1440
      and minimo=(
      select min(minimo) from f_lectura_sp7
      where
      gpscodi={0} and
      fechahora>=to_date('{1}','YYYY-MM-DD HH24:MI:SS')
      and fechahora &lt; to_date('{2}','YYYY-MM-DD HH24:MI:SS')+1/1440)
    </query>
  </Sql>

  <Sql>
    <key>SubitaFrecuencia</key>
    <query>
      select * from f_lectura_sp7
      where
      gpscodi={0} and
      fechahora>=to_date('{1}','YYYY-MM-DD HH24:MI:SS')
      and fechahora &lt; to_date('{2}','YYYY-MM-DD HH24:MI:SS')+1/1440
      and (
      ((vsf &lt; -1 or vsf > 1) and '{3}'='S')
      or
      ('{3}'='T')
      )      
    </query>
  </Sql>

  <Sql>
    <key>TramaFrecuencia</key>
    <query>
      select a.*
      from f_lectura_sp7 a where a.gpscodi={0}
      and
      (
      (a.fechahora >= to_date('{1}','YYYY-MM-DD HH24:MI:SS') and
      a.fechahora &lt; to_date('{2}','YYYY-MM-DD HH24:MI:SS'))
      )
      order by a.fechahora
    </query>

  </Sql>
    
</Sqls>
