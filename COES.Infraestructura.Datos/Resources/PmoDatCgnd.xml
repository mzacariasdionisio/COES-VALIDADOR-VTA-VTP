<?xml version="1.0" encoding="utf-8" ?>
<Sqls>

  <Sql>
    <key>List</key>
    <query>
      SELECT
      RE.PMCGNDCODI,
      --GR.GRUPOCODI  AS CODCENTRAL,
      PTO.CODREF as CODCENTRAL,
      --GR.GRUPONOMB AS NOMBCENTRAL,
      trim(PTO.PTOMEDIDESC) AS NOMBCENTRAL,
      BR.GRUPOCODISDDP AS CODBARRA,
      BR.GRUPONOMB AS NOMBBARRA,
      RE.PMCGNDTIPOPLANTA,
      RE.PMCGNDNROUNIDADES,
      RE.PMCGNDPOTINSTALADA,
      RE.PMCGNDFACTOROPE,
      RE.PMCGNDPROBFALLA,
      RE.PMCGNDCORTEOFALLA
      FROM PMO_DAT_CGND RE
      --JOIN PR_GRUPO GR ON RE.GRUPOCODI = GR.GRUPOCODI
      LEFT JOIN ME_PTOMEDICION PTO ON RE.GRUPOCODI=PTO.GRUPOCODI  AND PTOMEDIESTADO='A' AND PTO.TIPOINFOCODI=3  AND PTO.ORIGLECTCODI=22--AND TPTOMEDICODI in (66,67)
      LEFT JOIN PR_GRUPO BR ON RE.PMCGNDGRUPOCODIBARRA = BR.GRUPOCODI
      --ORDER BY GR.GRUPONOMB
      ORDER BY PTO.PTOMEDIDESC
    </query>
  </Sql>
  
  <Sql>
    <key>Update</key>
    <query>
      update PMO_DAT_CGND
      set
		PMCGNDGRUPOCODIBARRA = :GRUPOCODI,
        PMCGNDTIPOPLANTA = :PMCGNDTIPOPLANTA,     
        PMCGNDNROUNIDADES = :PMCGNDNROUNIDADES,
        PMCGNDPOTINSTALADA = :PMCGNDPOTINSTALADA,
        PMCGNDFACTOROPE = :PMCGNDFACTOROPE,
        PMCGNDPROBFALLA = :PMCGNDPROBFALLA,
		PMCGNDCORTEOFALLA=:PMCGNDCORTEOFALLA
      where
      PMCGNDCODI = :PMCGNDCODI
    </query>
  </Sql>

  <Sql>
    <key>GetBarra</key>
    <query>
      SELECT
      GRUPOCODI,
      --GRUPOCODISDDP AS GRUPOCODI,
      GRUPONOMB
      FROM PR_GRUPO
      WHERE CATECODI = 13 AND GRUPOACTIVO='S'
      ORDER BY GRUPONOMB
    </query>
  </Sql>
  
  <Sql>
    <key>GetById</key>
    <query>
      SELECT
      RE.PMCGNDCODI,
      RE.GRUPOCODI,
      --GR.GRUPOCODI AS CODCENTRAL,
      PTO.CODREF AS CODCENTRAL,
      --GR.GRUPONOMB AS NOMBCENTRAL,
      PTO.PTOMEDIDESC AS NOMBCENTRAL,
      RE.PMCGNDGRUPOCODIBARRA AS CODBARRA,
      BR.GRUPONOMB AS NOMBBARRA,
      RE.PMCGNDTIPOPLANTA,
      RE.PMCGNDNROUNIDADES,
      RE.PMCGNDPOTINSTALADA,
      RE.PMCGNDFACTOROPE,
      RE.PMCGNDPROBFALLA,
      RE.PMCGNDCORTEOFALLA
      FROM PMO_DAT_CGND RE
      --JOIN PR_GRUPO GR ON RE.GRUPOCODI = GR.GRUPOCODI
      LEFT JOIN ME_PTOMEDICION PTO ON RE.GRUPOCODI=PTO.GRUPOCODI  AND PTOMEDIESTADO='A' AND PTO.TIPOINFOCODI=3  AND PTO.ORIGLECTCODI=22--AND TPTOMEDICODI in (66,67)
      LEFT JOIN PR_GRUPO BR ON RE.PMCGNDGRUPOCODIBARRA = BR.GRUPOCODI
      WHERE RE.PMCGNDCODI= :PMCGNDCODI
      --ORDER BY GR.GRUPONOMB
      ORDER BY PTO.PTOMEDIDESC
    </query>
  </Sql>
  
  <Sql>
    <key>GetDat</key>
    <query>
      SELECT
      --LPAD(GR.GRUPOCODISDDP,4,' ') AS "Num",
      LPAD(PTO.CODREF,4,' ') AS "Num",
      --RPAD(TRIM(SUBSTR(GR.GRUPONOMB,1,12)),12,' ') AS "Name",
      RPAD(TRIM(SUBSTR(PTO.PTOMEDIDESC,1,12)),12,' ') AS "Name",
      LPAD(BR.GRUPOCODISDDP,5,' ') AS "Bus",
      LPAD(RE.PMCGNDTIPOPLANTA,4,' ') AS "Tipo",
      LPAD(RE.PMCGNDNROUNIDADES,4,' ') as "Uni",
      LPAD(RE.PMCGNDPOTINSTALADA,7,' ') AS "PotIns",
      LPAD(RE.PMCGNDFACTOROPE,8,' ') AS "FatOpe",
      LPAD(RE.PMCGNDPROBFALLA,7,' ') AS "ProbFal",
      LPAD(RE.PMCGNDCORTEOFALLA,4,' ') AS "SFal"  ,
      RE.PMCGNDPROBFALLA,
      RE.PMCGNDFACTOROPE,
      RE.PMCGNDPOTINSTALADA
      FROM PMO_DAT_CGND RE
      --JOIN PR_GRUPO GR ON RE.GRUPOCODI = GR.GRUPOCODI
      LEFT JOIN ME_PTOMEDICION PTO ON RE.GRUPOCODI=PTO.GRUPOCODI  AND PTOMEDIESTADO='A' AND PTO.TIPOINFOCODI=3  AND PTO.ORIGLECTCODI=22--AND TPTOMEDICODI in (66,67)
      LEFT JOIN PR_GRUPO BR ON RE.PMCGNDGRUPOCODIBARRA = BR.GRUPOCODI
      --ORDER BY GR.GRUPONOMB
      ORDER BY PTO.PTOMEDIDESC
    </query>
  </Sql>
  
  <Sql>
    <key>GetCount</key>
    <query>
        select count(*) as CANT from pmo_dat_cgnd
    </query>
  </Sql>
  
  <Sql>
    <key>GetGrupoCodi</key>
    <query>
      SELECT 
	  GRUPOCODI 
	  FROM 
	  PMO_DAT_CGND
    </query>
  </Sql>
</Sqls>
