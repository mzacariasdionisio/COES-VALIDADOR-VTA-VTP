<?xml version="1.0" encoding="utf-8" ?>
<Sqls>

  <Sql>
    <key>GetMaxId</key>
    <query>
      SELECT NVL(MAX(AUDITCODI), 0) + 1 FROM SI_AUDITORIA_REGISTRO
    </query>
  </Sql>
  <Sql>
    <key>Save</key>
    <query>
      INSERT
      INTO
      SI_AUDITORIA_REGISTRO
      (
      AUDITCODI,
      TAUDITCODI,
      AUDITNOMBRESISTEMA,
      AUDITTABLACODI,
      AUDITREGDET,
      AUDITUSUARIOCREACION,
      AUDITFECHACREACION
      )
      VALUES
      (
      :AUDITCODI,
      :TAUDITCODI,
      :AUDITNOMBRESISTEMA,
      :AUDITTABLACODI,
      TO_CLOB(:AUDITREGDET),
      :AUDITUSUARIOCREACION,
      :AUDITFECHACREACION
      )
    </query>
  </Sql>

  <Sql>
    <key>Update</key>
    <query>
      UPDATE SI_AUDITORIA_REGISTRO
      SET
      TAUDITCODI=:TAUDITCODI,
      AUDITNOMBRESISTEMA=:AUDITNOMBRESISTEMA,
      AUDITTABLACODI=:AUDITTABLACODI,
      AUDITREGDET=:AUDITREGDET,
      AUDITUSUARIOCREACION=:AUDITUSUARIOCREACION,
      AUDITFECHACREACION=:AUDITFECHACREACION
      WHERE
      AUDITCODI=:AUDITCODI
    </query>
  </Sql>

  <Sql>
    <key>Delete</key>
    <query>
      DELETE FROM SI_AUDITORIA_REGISTRO
      WHERE AUDITCODI=:AUDITCODI
    </query>
  </Sql>

  <Sql>
    <key>GetById</key>
    <query>
      SELECT
      AUDITCODI,
      TAUDITCODI,
      AUDITNOMBRESISTEMA,
      AUDITTABLACODI,
      AUDITREGDET,
      AUDITUSUARIOCREACION,
      AUDITFECHACREACION,
      AUDITUSUARIOUPDATE,
      AUDITFECHAUPDATE
      FROM
      SI_AUDITORIA_REGISTRO
      WHERE AUDITCODI=:AUDITCODI
    </query>
  </Sql>

  <Sql>
    <key>List</key>
    <query>
      SELECT
      AUDITCODI,
      TAUDITCODI,
      AUDITNOMBRESISTEMA,
      AUDITTABLACODI,
      AUDITREGDET,
      AUDITUSUARIOCREACION,
      AUDITFECHACREACION,
      AUDITUSUARIOUPDATE,
      AUDITFECHAUPDATE
      FROM
      SI_AUDITORIA_REGISTRO
      WHERE TAUDITCODI=:TAUDITCODI AND AUDITTABLACODI=:AUDITTABLACODI ORDER BY AUDITCODI,AUDITFECHACREACION ASC
    </query>
  </Sql>
  <Sql>
    <key>ListPaginado</key>
    <query>
      SELECT * FROM(
      SELECT
      AUDITCODI,
      TAUDITCODI,
      AUDITNOMBRESISTEMA,
      AUDITTABLACODI,
      AUDITREGDET,
      AUDITUSUARIOCREACION,
      AUDITFECHACREACION,
      AUDITUSUARIOUPDATE,
      AUDITFECHAUPDATE,
      (row_number() over (order by AUDITCODI desc)) as r
      FROM
      SI_AUDITORIA_REGISTRO
      WHERE TAUDITCODI=:TAUDITCODI AND AUDITTABLACODI=:AUDITTABLACODI ORDER BY AUDITFECHACREACION ASC
      )
      where r >= (((:PageNumber-1) * :PageSize) + 1) and r &lt; ((:PageNumber * :PageSize) + 1 )
    </query>
  </Sql>

  <Sql>
    <key>GetByCriteria</key>
    <query>
      SELECT
      AUDITCODI,
      TAUDITCODI,
      AUDITNOMBRESISTEMA,
      AUDITTABLACODI,
      AUDITREGDET,
      AUDITUSUARIOCREACION,
      AUDITFECHACREACION,
      AUDITUSUARIOUPDATE,
      AUDITFECHAUPDATE
      FROM
      SI_AUDITORIA_REGISTRO
    </query>
  </Sql>
  <Sql>
    <key>GetByUsuariosAuditoria</key>
    <query>
      SELECT
      COUNT(AUDITUSUARIOCREACION) AS AUDITCODI,
      AUDITUSUARIOCREACION
      FROM SI_AUDITORIA_REGISTRO group by AUDITUSUARIOCREACION
    </query>
  </Sql>
</Sqls>
