@model  COES.Dominio.DTO.Sic.EpoEstudioEoDTO

@{
    ViewBag.Title = "Detalle EO";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style>
    .table th, .table td {
        border-top: 1px solid #dddddd;
    }

    .text-center {
        text-align: center;
    }

    .text-success {
        color: #468847;
    }

        .text-success td {
            background-color: rgb(249, 249, 249);
            padding: 6px;
        }


    .text-info {
        color: #3a87ad;
    }

        .text-info td {
            background-color: rgb(223, 240, 216);
            padding: 6px;
        }

    .text-normal td {
        background-color: rgb(249, 249, 249);
        padding: 6px;
    }

    .text-normal-gris td {
        background-color: rgb(239, 238, 239);
        padding: 6px;
    }

    .table-bordered th, .table-bordered td {
        border-left: 1px solid #dddddd;
    }
</style>

<div style="padding: 5px">
    <h3>Datos del Estudio</h3>
    <table style="width:70%" cellpadding="6">
        <tr>
            <td>Código de Estudio:</td>
            <td><input type="text" readonly value="@Model.Esteocodiusu" /></td>
            <td>Nombre de Estudio:</td>
            <td><input type="text" readonly value="@Model.Esteonomb" /></td>
        </tr>
        <tr>
            <td>Reponsable:</td>
            <td><input type="text" readonly value="@Model.Esteoresponsable" /></td>
            <td>Gestor del Proyecto:</td>
            <td><input type="text" readonly value="@Model.Emprnomb" /></td>
        </tr>
        <tr>
            <td>Tercero Involucrado:</td>
            <td colspan="3"><textarea readonly rows="3" cols="100">@ViewBag.TerceroInvolucrado</textarea></td>

        </tr>
        <tr>
            <td>Fecha de Presentación:</td>
            <td><input type="text" readonly value="@(Model.Esteofechaini.HasValue ? (Model.Esteofechaini.Value.ToString("dd/MM/yyyy") != "01/01/0001" ? Model.Esteofechaini.Value.ToString("dd/MM/yyyy") : "") : "")" /></td>
            <td>Fecha Conformidad:</td>
            <td><input type="text" readonly value="@(Model.Esteofechafin.HasValue ? (Model.Esteofechafin.Value.ToString("dd/MM/yyyy") != "01/01/0001" ? Model.Esteofechafin.Value.ToString("dd/MM/yyyy") : "") : "")" /></td>

        </tr>
        <tr>
            <td>Punto de conexión:</td>
            <td><input type="text" readonly value="@Model.Esteopuntoconexion" /></td>
            <td>Año de puesta en servicio:</td>
            <td><input type="text" readonly value="@Model.Esteoanospuestaservicio" /></td>
        </tr>
        <tr>
            <td>Tipo de Proyecto:	</td>
            <td>
                <input type="text" readonly value="@Model.EsteoTipoProyecto" />
                @*@if (!string.IsNullOrEmpty(Model.Esteopotencia))
                {
                    <input type="text" readonly value="Potencia de Generación @Model.Esteopotencia" />
                }
                else if (!string.IsNullOrEmpty(Model.Esteocapacidad))
                {
                    <input type="text" readonly value="Potencia de Demanda @Model.Esteocapacidad" />

                }
                else if (!string.IsNullOrEmpty(Model.Esteocarga))
                {
                    <input type="text" readonly value="Transmisión @Model.Esteocapacidad" />
                }
                else if (!string.IsNullOrEmpty(Model.Esteopotenciarer))
                {
                    <input type="text" readonly value="Potencia de Generación RER @Model.Esteopotenciarer" />
                }
                else
                {
                    <input type="text" readonly value="" />
                }*@
            </td>
            <td>Estado:</td>
            <td><input type="text" readonly value="@Model.Estadescripcion" /></td>
        </tr>
        <tr>
            <td>Zona de Proyecto:</td>
            <td>
                <input type="text" readonly value="@Model.ZonDescripcion" />
            </td>
        </tr>
        <tr>
            <td>Comentarios</td>
            <td colspan="3">
                @Html.TextAreaFor(m => m.Esteoobs, new { @class = "form-control", @readonly = "readonly", rows = "5", cols = "100", autocomplete = "off" })
            </td>
        </tr>
    </table>
    <h3>Datos del Proceso y Verificación</h3>
    <table>
        <tr>
            <td>
                <table class="table-bordered" width="100%">
                    <tr class="text-success text-center">
                        <td colspan="4">Solicitud de Alcance<br />(Gestor del Proyecto)</td>
                        <td colspan="6">Verificación Presentación del EO</td>
                    </tr>
                    <tr class="text-info text-center">
                        <td colspan="2">Solicitud de Alcance<br />(Gestor del Proyecto)</td>
                        <td colspan="2">Envío de Alcances<br />(COES)</td>
                        <td colspan="2">Presentación del EO<br />(Gestor del Proyecto)</td>
                        <td colspan="2">Verificación de Información<br />(COES)</td>

                        <td colspan="2">Absolución de Observaciones (Gestor del Proyecto)</td>
                    </tr>
                    <tr class="text-normal text-center">
                        <td>Enlace</td>
                        <td>Fecha inicio</td>
                        <td>Enlace</td>
                        <td>Fecha Final</td>
                        <td>Enlace</td>
                        <td>Fecha Inicio</td>
                        <td>Enlace</td>
                        <td>Fecha de Verificación</td>

                        <td>Enlace</td>
                        <td>Fecha de Absolución</td>
                    </tr>



                    <tr class="text-normal-gris text-center">
                        <td>@Model.Esteoalcancesolesttit</td>
                        <td>
                            @(Model.Esteoalcancefechaini.HasValue ? (Model.Esteoalcancefechaini.Value.ToString("dd/MM/yyyy") != "01/01/0001" ? Model.Esteoalcancefechaini.Value.ToString("dd/MM/yyyy") : "") : "")
                            
                            @if (!string.IsNullOrEmpty(Model.Esteoalcanceestadocolor))
                            {
                                <hr style="border: solid 3px @Model.Esteoalcanceestadocolor" title="@Model.Esteoalcanceestado" />
                            }
                        </td>
                        <td>@Model.Esteoalcanceenviotit</td>
                        <td>@(Model.Esteoalcancefechafin.HasValue ? (Model.Esteoalcancefechafin.Value.ToString("dd/MM/yyyy") != "01/01/0001" ? Model.Esteoalcancefechafin.Value.ToString("dd/MM/yyyy") : "") : "")</td>
                        <td>@Model.Esteoverientregaesttit</td>
                        <td>@(Model.Esteoverifechaini.HasValue ? (Model.Esteoverifechaini.Value.ToString("dd/MM/yyyy") != "01/01/0001" ? Model.Esteoverifechaini.Value.ToString("dd/MM/yyyy") : "") : "")</td>
                        <td>@Model.Esteovericartatit</td>
                        <td>
                            @(Model.Esteoverifechafin.HasValue ? (Model.Esteoverifechafin.Value.ToString("dd/MM/yyyy") != "01/01/0001" ? Model.Esteoverifechafin.Value.ToString("dd/MM/yyyy") : "") : "")
                            @if (!string.IsNullOrEmpty(Model.Esteoveriestadocolor))
                            {
                                <hr style="border: solid 3px @Model.Esteoveriestadocolor" title="@Model.Esteoveriestado" />
                            }
                        </td>
                        <td>@Model.EsteoAbsTit</td>
                        <td>
                            @(Model.EsteoAbsFFin.HasValue ? (Model.EsteoAbsFFin.Value.ToString("dd/MM/yyyy") != "01/01/0001" ? Model.EsteoAbsFFin.Value.ToString("dd/MM/yyyy") : "") : "")
                            @if (!string.IsNullOrEmpty(Model.EsteoAbsestadocolor))
                            {
                                <hr style="border: solid 3px @Model.EsteoAbsestadocolor" title="@Model.EsteoAbsestado" />
                            }
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
    <h3>Datos de Revisión EO</h3>
    <table>
        <tr>
            <td>
                <table class="table-bordered" border="1" >
                    <tr class="text-success text-center">
                        <td >Nro. Revisión</td>
                        <td colspan="3">Presentación EO / Absolución de Observaciones<br />(Gestor del Proyecto)</td>
                        <td colspan="3">Envío del Estudio al Tercero Involucrado<br />(COES)</td>
                        <td colspan="3">Revisión del Estudio<br />(Tercero Involucrado)</td>
                        <td colspan="3">Revisión y Conformidad del Estudio<br />(COES)</td>
                    </tr>
                    <tr class="text-info text-center">
                        <td style="width:10px;"></td>
                        <td style="width:10px;">Fecha Inicio</td>
                        <td style="width:10px;">Fecha Fin</td>
                        <td style="width:10px;">Comunicación</td>
                        <td style="width:10px;">Fecha Inicio</td>
                        <td style="width:10px;">Fecha Fin</td>
                        <td style="width:10px;">Comunicación</td>
                        <td style="width:10px;">Fecha Inicio</td>
                        <td style="width:10px;">Fecha Fin</td>
                        <td style="width:10px;">Comunicación</td>
                        <td style="width:10px;">Fecha Inicio</td>
                        <td style="width:10px;">Fecha Fin</td>
                        <td style="width:10px;">Comunicación</td>
                    </tr>
                    @{
                        int contador = 1;
                        foreach (COES.Dominio.DTO.Sic.EpoRevisionEoDTO item in ViewBag.ListadoRevision)
                        {
                            string filaclass = (contador % 2 == 0) ? "text-normal-gris" : "text-normal";
                            <tr class="text-center @filaclass">
                                <td>
                                    @contador
                                </td>
                                <td>
                                    @(item.Reveolevobsfechaini.HasValue ? (item.Reveolevobsfechaini.Value.ToString("dd/MM/yyyy") != "01/01/0001" ? item.Reveolevobsfechaini.Value.ToString("dd/MM/yyyy") : "") : "")
                                </td>
                                
                                <td>
                                    @(item.Reveolevobsfechafin.HasValue ? (item.Reveolevobsfechafin.Value.ToString("dd/MM/yyyy") != "01/01/0001" ? item.Reveolevobsfechafin.Value.ToString("dd/MM/yyyy") : "") : "")
                                
                                    @if (!string.IsNullOrEmpty(item.LevantamientObservacionEstadoColor))
                                    {
                                        <hr style="border: solid 3px @item.LevantamientObservacionEstadoColor" title="@item.LevantamientObservacionEstado" />
                                    }
                                </td>
                                <td>
                                    @item.Reveolevobstit
                                </td>
                                <td>
                                    @(item.Reveoenvesttercinvfechaini.HasValue ? (item.Reveoenvesttercinvfechaini.Value.ToString("dd/MM/yyyy") != "01/01/0001" ? item.Reveoenvesttercinvfechaini.Value.ToString("dd/MM/yyyy") : "") : "")
                                </td>
                                
                                <td>
                                    @(item.Reveoenvesttercinvinvfechafin.HasValue ? (item.Reveoenvesttercinvinvfechafin.Value.ToString("dd/MM/yyyy") != "01/01/0001" ? item.Reveoenvesttercinvinvfechafin.Value.ToString("dd/MM/yyyy") : "") : "")
                                
                                    @if (!string.IsNullOrEmpty(item.EnvioEstudioTercerInvolucradoEstadoColor))
                                    {
                                        <hr style="border: solid 3px @item.EnvioEstudioTercerInvolucradoEstadoColor" title="@item.EnvioEstudioTercerInvolucradoEstado" />
                                    }
                                </td>
                                <td>
                                    @item.Reveoenvesttercinvtit
                                </td>
                                <td>
                                    @(item.Reveorevterinvfechaini.HasValue ? (item.Reveorevterinvfechaini.Value.ToString("dd/MM/yyyy") != "01/01/0001" ? item.Reveorevterinvfechaini.Value.ToString("dd/MM/yyyy") : "") : "")
                                </td>
                                
                                <td>
                                    @(item.Reveorevterinvfechafin.HasValue ? (item.Reveorevterinvfechafin.Value.ToString("dd/MM/yyyy") != "01/01/0001" ? item.Reveorevterinvfechafin.Value.ToString("dd/MM/yyyy") : "") : "")
                                    
                                    @if (!string.IsNullOrEmpty(item.RevisionEstudioEstadoColor))
                                    {
                                        <hr style="border: solid 3px @item.RevisionEstudioEstadoColor" title="@item.RevisionEstudioEstado" />
                                    }
                                </td>
                                <td>
                                    @item.Reveorevterinvtit
                                </td>
                                <td>
                                    @(item.Reveorevcoesfechaini.HasValue ? (item.Reveorevcoesfechaini.Value.ToString("dd/MM/yyyy") != "01/01/0001" ? item.Reveorevcoesfechaini.Value.ToString("dd/MM/yyyy") : "") : "")
                                </td>
                                
                                <td>
                                    @(item.Reveocoesfechafin.HasValue ? (item.Reveocoesfechafin.Value.ToString("dd/MM/yyyy") != "01/01/0001" ? item.Reveocoesfechafin.Value.ToString("dd/MM/yyyy") : "") : "")
                                
                                    @if (!string.IsNullOrEmpty(item.RevisionConfirmidadEstudioEstadoColor))
                                    {
                                        <hr style="border: solid 3px @item.RevisionConfirmidadEstudioEstadoColor" title="@item.RevisionConfirmidadEstudioEstado" />
                                    }
                                </td>
                                <td>
                                    @item.Reveorevcoescartarevisiontit
                                </td>
                            </tr>

                            contador++;
                        }
                    }
                    <tr class="text-normal">
                        <td colspan="13"></td>
                    </tr>
                    <tr class="text-normal">
                        <td></td>
                        <td colspan="2">Carta de Conformidad: </td>
                        <td colspan="3">@Model.Esteocertconformidadtit</td>
                        <td>@(Model.Esteofechafin.HasValue ? (Model.Esteofechafin.Value.ToString("dd/MM/yyyy") != "01/01/0001" ? Model.Esteofechafin.Value.ToShortDateString() : "") : "")</td>
                        <td></td>
                        <td></td>
                        <td colspan="2">Resumen Ejecutivo:</td>
                        <td colspan="3"><a target="_blank" href="@Model.Esteoresumenejecutivoenl">@Model.Esteoresumenejecutivotit</a></td>
                    </tr>
                    <tr class="text-normal">
                        <td colspan="13"></td>
                    </tr>
                    <tr class="text-normal">
                        <td></td>
                        <td colspan="3">Nº Días calendario (Gestor del Proyecto):</td>
                        <td>@Model.TotNroDiasTitProyect</td>
                        <td></td>
                        <td colspan="2">Nº Días calendario (Tercero Involucrado):</td>
                        <td>@Model.TotNroDiasTercerInv</td>
                        <td></td>
                        <td colspan="2">Nº Días calendario (COES):</td>
                        <td>@Model.TotNroDiasCoes</td>
                    </tr>
                    <tr class="text-normal">
                        <td></td>
                        <td colspan="3"></td>
                        <td></td>
                        <td></td>
                        <td colspan="2"></td>
                        <td></td>
                        <td></td>
                        <td colspan="2">Promedio Nº Días hábiles (COES):</td>
                        <td>@Model.PromNroDiasHabilesCoes</td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</div>